<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/knobJogDial.css">
    <script src="../js/p5/p5.min.js" type="text/javascript"></script>
    <title>Knob</title>
</head>
<body>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script>
    <script src="../js/JogDial/jogDial.min.js"></script>


<div class="container">
    <div class="dials">
        <div class="dial"> 
            <div id="jog_dial_example_meter_fill">
                Volume&nbsp;
                <span id="jog_dial_example_meter_text"></span>
            </div>            
          <div id="jog_dial_example_meter">

             <div style="width: 31">

            </div>

           </div>
       <!-- <div class="meterTitle">This</div> -->
           <div id="jog_dial_example">
           </div>

    </div>        
</div>

 </div>
  

<script>
  //Dial
  let width =  window.innerWidth;
    let height = window.innerHeight;

$(document).ready(function(){
var dialOne = JogDial(document.getElementById('jog_dial_example'),
    {   wheelSize:'20vh', 
       // debug : true, 
        knobSize:'70px', 
        //     touchMode : 'knob',  // knob | wheel 
        //     wheelSize : '100%',
        //     zIndex : 9999,
        minDegree:0, 
        maxDegree:360, 
        degreeStartAt: 0})
    .on('mousemove', function(evt){
      $('#jog_dial_example_meter div').css('width', Math.round((evt.target.rotation/360)*100) )
    });
  });
  

    addEventListener("mousedown", function(evt){
        // on move
        // event.target.rotation
    });




  
</script>


<script>
        let amount, 
        amountObj =[],
        theta = x = y = 0;
        addEventListener("mousemove", function(evt){
        // on move
        let num = $('#jog_dial_example_meter div').attr("style").split(':')[1].split('px')[0]; 
        document.getElementById('jog_dial_example_meter_text').innerHTML = parseInt(num);
        amount =   document.getElementById('jog_dial_example_meter_text').innerHTML;
  //     console.log(document.getElementById('jog_dial_example_meter_text').innerHTML);

        addEventListener("mouseup", function(evt){
                // on move
                // event.target.rotation
                setup();
            });
    
    });

    function setup(){
       createCanvas(width, height); 
       background(20);
       x = y = height/2;
        noFill();
        stroke(256);
       for(let i =0 ; i<=parseInt(amount)+1 ; i++){
       amountObj.push(i);
       }

    let count = 0;

       beginShape();

for(let i =0 ; i<=amount+1 ; i++){



        vertex(x+10,y+10)
        if(Math.random()>.5){
            //horizontal line
            if(x>width || y>height){
                x=y=300;
            }
                  //additive
                if(Math.random()>.5){
                x = x+20;
                vertex(x, y)
                }
                else{
                    //subtractive
                    x = x-20;
                vertex(x, y)    
                }          

        }else{
           // vertical line
           if(x>width || y>height){
              break;
            }
              //additive
              if(Math.random()>.5){
                      y = y+20;
                vertex(x, y)
                }
                else{
                    //subtractive
                    y = y-20;
                vertex(x, y)    
                }
          
        }
     }

    endShape();
   
    }



    function draw(){
        theta++;
           
            fill(0);
            stroke(256);
     //        rect(width/amount*i,height/2,width/amount,300);


 

     
    }
</script>

</body>
</html>
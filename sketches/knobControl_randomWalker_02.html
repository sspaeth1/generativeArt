<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/knobJogDial.css">
    <script src="../js/p5/p5.min.js" type="text/javascript"></script>
    <title>Knob</title>
</head>
<body>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script>
    <script src="../js/JogDial/jogDial.min.js"></script>


<div class="container">
    <div class="dials">
        <div class="dial"> 
            <div id="jog_dial_example_meter_fill">
                Walk Distance&nbsp;
                <span id="jog_dial_example_meter_text"></span>
            </div>            
          <div id="jog_dial_example_meter">
             <div style="width: 0">
            </div>
           </div>
           <div id="jog_dial_example">
           </div>
    </div>        
</div>

 </div>
  

<script>
  //Dial
  let width =  window.innerWidth;
    let height = window.innerHeight;

    $(document).ready(function(){
    var dialOne = JogDial(document.getElementById('jog_dial_example'),
        {   wheelSize:'20vh', 
            knobSize:'70px', 
            minDegree:0, 
            maxDegree:360, 
            degreeStartAt: 0})
        .on('mousemove', function(evt){
        $('#jog_dial_example_meter div').css('width', Math.round((evt.target.rotation/360)*100) )
        });
    });
  
    addEventListener("mousedown", function(evt){
        // on move
        // event.target.rotation
    });
  
</script>

<script>
    //p5 make em walk random
        let amount, 
        amountObj =[],
        theta = x = y = 0;


        // on move  
        addEventListener("mousemove", function(evt){
            let num = $('#jog_dial_example_meter div').attr("style").split(':')[1].split('px')[0]; 
            document.getElementById('jog_dial_example_meter_text').innerHTML = Math.floor(parseInt(num))/2;
            amount =    Math.floor(($('#jog_dial_example_meter div').attr("style").split(':')[1].split('px')[0]))
        });

         // on mouseup  clear and startover
        addEventListener("mouseup", function(evt){
            setup();
        });
        
    function setup(){
       createCanvas(width, height); 
       background(20);
       x = width/2;
       y = height/2;
        noFill();
        stroke(256);
    }

    function draw(){
        theta++;
        let choice = Math.floor(Math.random()*4);

        if(x > width || y> height){
            x = width/2;
            y = height/2;
        }
        if(choice ==0 ){
            x=x+amount;
        }else if(choice == 1){
            x=x-amount;
        }else if(choice ==2 ){
            y=y+amount;
        }else if(choice ==3){
            y=y-amount;
        }

       strokeWeight(10);
        point(width/2, height/2);
            point(x,y)
    }
</script>

</body>
</html>